/**********************************************************************
 * 文件名: Svpwm_dq.h
 * 创建日期: 2017年1月15日
 * 作者: XQ
 * 功能概述: 空间矢量PWM控制算法头文件，定义了SVPWM相关的数据结构
 * 本代码仅用于学习使用，未经允许不得用于其他任何用途
 * 版权所有：硕力电子
 * DSP/STM32开发板设计
 * 淘宝店铺：硕力电子
 * 网址: https://shuolidianzi.taobao.com
 * 修改日期: 2017/1/23
 * 版本：V17.3-1
 * 作者QQ: 616264123
 * 技术交流QQ群：314306105
 **********************************************************************/

#ifndef Svpwm_dq_H
#define Svpwm_dq_H

/* 包含所需的头文件 */
#include "./SYSTEM/sys/sys.h"    // 系统配置头文件
#include "IQ_math.h"             // IQ数学库，用于定点数运算

/**
 * @brief  SVPWM控制结构体
 * @note   包含空间矢量PWM控制所需的所有变量
 *         输入：静止坐标系下的Alpha和Beta轴电压分量
 *         输出：三相PWM的占空比
 *         中间变量：用于扇区判断和计算的临时变量
 */
typedef struct { 
    int32_t  Ualpha;      // 输入：Alpha轴电压分量
    int32_t  Ubeta;       // 输入：Beta轴电压分量
    int32_t  Ta;          // 输出：A相PWM占空比
    int32_t  Tb;          // 输出：B相PWM占空比
    int32_t  Tc;          // 输出：C相PWM占空比
    int32_t  tmp1;        // 中间变量：用于扇区判断的X值
    int32_t  tmp2;        // 中间变量：用于扇区判断的Y值
    int32_t  tmp3;        // 中间变量：用于扇区判断的Z值
    uint16_t VecSector;   // 电压矢量所在扇区(1-6)
} SVPWM, *p_SVPWM;

/* SVPWM结构体默认初始值 */
#define SVPWM_DEFAULTS {0,0,0,0,0,0,0,0,0}

/**
 * @brief  SVPWM计算函数声明
 * @param  pV: SVPWM结构体指针
 * @note   实现空间矢量PWM的扇区判断和占空比计算
 */
void SVPWM_Cale(p_SVPWM pV);

#endif /* Svpwm_dq_H */

//===========================================================================
// 文件结束
//===========================================================================
